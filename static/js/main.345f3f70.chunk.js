(this.webpackJsonpbooks=this.webpackJsonpbooks||[]).push([[0],{39:function(e,t,a){e.exports=a(68)},45:function(e,t,a){},68:function(e,t,a){"use strict";a.r(t);a(40);var n=a(0),r=a.n(n),o=a(20),c=a.n(o),l=(a(45),a(10)),i=a(9),u=a(13),s=a(12),m=a(8),d=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light"},r.a.createElement("a",{className:"navbar-brand",href:"#"},"React App"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNav"},r.a.createElement("ul",{className:"navbar-nav"},r.a.createElement("li",{className:"nav-item active"},r.a.createElement(m.a,{className:"nav-link",to:"/"},"Home")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(m.a,{className:"nav-link",to:"/about"},"About")))))}}]),a}(r.a.Component),b=a(16),p=a(11),h=a(4),v=Object(h.a)(),E=a(15),f=a.n(E);f.a.defaults.baseURL="https://react-crud-books.herokuapp.com";var k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f.a.get("/books",{params:e}).then((function(e){return e.data}))},O=function(e){return f.a.post("/books",{book:e}).then((function(e){return e.data}))},g=function(e,t){var a=t.title;return f.a.patch("/books/"+e,{title:a}).then((function(e){return e.data}))},j=function(e){return f.a.get("/books/"+e).then((function(e){return e.data}))},y=function(e){return f.a.delete("/books/"+e)},N=function(e){return{type:"RECEIVE_BOOKS",payload:e}};var B=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props.book,a=t.id,n="/books/".concat(a,"/edit");return r.a.createElement("tr",null,r.a.createElement("th",{scope:"row"},a),r.a.createElement("td",null,t.title),r.a.createElement("td",null,this.shortDate(t.created_at)),r.a.createElement("td",null,r.a.createElement(m.a,{className:"mr-2",to:n},"Edit"),r.a.createElement("a",{href:"#",onClick:function(){return e.props.deleteBook(a)}},"Remove")))}},{key:"shortDate",value:function(e){var t=new Date(e),a="".concat(t.getHours(),":").concat(t.getMinutes());return[t.toDateString(),a].join(" ")}}]),a}(r.a.Component),S={deleteBook:function(e){return function(t){return y(e).then((function(a){return t(function(e){return{type:"BOOK_REMOVED",id:e}}(e))}))}}},C=Object(p.b)(null,S)(B),D=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleInput=n.handleInput.bind(Object(b.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchBooks()}},{key:"handleInput",value:function(e){var t=e.target.value;this.props.fetchBooks({sort:t}),this.props.sortBooks(t)}},{key:"render",value:function(){var e=this.props.books.map((function(e){return r.a.createElement(C,{key:e.id,book:e})}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-2"},r.a.createElement(m.a,{className:"btn btn-primary my-4",to:"/add-book"},"Add book")),r.a.createElement("div",{className:"col-2 offset-8 align-self-center"},r.a.createElement("select",{name:"sortField",value:this.props.sortField,onChange:this.handleInput,className:"form-control"},r.a.createElement("option",{value:"",disabled:!0},"Sort by"),r.a.createElement("option",{value:"created_at"},"Created"),r.a.createElement("option",{value:"title"},"Title")))),r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"#"),r.a.createElement("th",{scope:"col"},"Title"),r.a.createElement("th",{scope:"col"},"Created"),r.a.createElement("th",{scope:"col"},"Actions"))),r.a.createElement("tbody",null,e)))}}]),a}(r.a.Component),_=Object(p.b)((function(e){return{books:e.books,sortField:e.booksFilters.sortField}}),{fetchBooks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){k(e).then((function(e){return t(N(e))}))}},sortBooks:function(e){return{type:"SORT_BOOKS",sortField:e}}})(D),w=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={input:""},n.onChange=n.onChange.bind(Object(b.a)(n)),n.onSubmit=n.onSubmit.bind(Object(b.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.paramId();this.isEditMode()&&j(t).then((function(t){e.setState({input:t.title})}))}}]),Object(i.a)(a,[{key:"onChange",value:function(e){this.setState({input:e.currentTarget.value})}},{key:"onSubmit",value:function(e){if(e.preventDefault(),this.isEditMode())return this.props.updateBook(this.paramId(),{title:this.state.input});this.props.createBook({title:this.state.input})}},{key:"isEditMode",value:function(){return!("edit"!==this.props.mode)}},{key:"paramId",value:function(){return this.isEditMode()?this.props.match.params.id:void 0}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"titleInput"},"Title"),r.a.createElement("input",{type:"book",value:this.state.input,onChange:this.onChange,className:"form-control",id:"titleInput"})),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Submit")))}}]),a}(r.a.Component),F=Object(p.b)(null,{createBook:function(e){return function(t){return O(e).then((function(){return v.push("/")}))}},updateBook:function(e,t){var a=t.title;return function(t){return g(e,{title:a}).then((function(){return v.push("/")}))}}})(w),I=a(2);function M(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(I.c,null,r.a.createElement(I.a,{path:"/about"},r.a.createElement(R,null)),r.a.createElement(I.a,{path:"/add-book"},r.a.createElement(F,{mode:"add"})),r.a.createElement(I.a,{path:"/books/:id/edit",render:function(e){return r.a.createElement(F,Object.assign({},e,{mode:"edit"}))}}),r.a.createElement(I.a,{path:"/"},r.a.createElement(_,null))))}function R(){return r.a.createElement("i",null,"About")}var T=function(){return r.a.createElement("div",{className:"container"},r.a.createElement(I.b,{history:v},r.a.createElement(d,null),r.a.createElement(M,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var A=a(14),K=a(37),V=a(18),x=a(38),U=Object(A.c)({books:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"BOOK_ADDED":return[].concat(Object(x.a)(e),[t.payload]);case"RECEIVE_BOOKS":return t.payload;case"BOOK_REMOVED":var a=e.filter((function(e){return e.id!==t.id}));return a;case"BOOK_UPDATED":var n=t.title;return e.map((function(e,a){return e.id===t.id?Object(V.a)(Object(V.a)({},e),{},{title:n}):e}));default:return e}},booksFilters:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{sortField:""},t=arguments.length>1?arguments[1]:void 0,a=t.sortField;return a?Object(V.a)(Object(V.a)({},e),{},{sortField:a}):e}}),H=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||A.d;var J=Object(A.e)(U,H(Object(A.a)(K.a)));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(p.a,{store:J},r.a.createElement(T,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[39,1,2]]]);
//# sourceMappingURL=main.345f3f70.chunk.js.map